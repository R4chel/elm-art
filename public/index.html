<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <!--
      manifest.json provides metadata used when your web app is added to the
      homescreen on Android. See https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json">
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico">
    <title>Random Joy</title>

    <script src="elm.js"></script>
</head>

<body>
    <div id="root"></div>
    <script>
        var app = Elm.Main.init({
            node: document.getElementById('root')
        });
        console.log(app);
        app.ports.getSvg.subscribe(function() {
            var node = document.getElementById("output");
            var name = "elm-art.svg";

            node.setAttribute("xmlns", "http://www.w3.org/2000/svg");
            var svgData = node.outerHTML;
            var preface = '<?xml version="1.0" standalone="no"?>\r\n';
            var svgBlob = new Blob([preface, svgData], {
                type: "image/svg+xml;charset=utf-8"
            });
            var svgUrl = URL.createObjectURL(svgBlob);
            var downloadLink = document.createElement("a");
            downloadLink.href = svgUrl;
            downloadLink.download = name;
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);


        });
    </script>
</body>

</html>
